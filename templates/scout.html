{% include 'head.html' %}
{#<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.6.1/bootstrap-slider.min.js" integrity="sha256-nviKEC91moGfyFMMzT31WyNxuAvIIgOSkSGi7K6U7EU=" crossorigin="anonymous"></script>#}
{#<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.6.1/css/bootstrap-slider.min.css" integrity="sha256-+xqVrdbLgHjiKF8ULvcwzQ545r7lCVfOqXlNJCB3XOg=" crossorigin="anonymous" />#}
<html>
    <body style="background-color: #222">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="container" style="margin-top: 30px; z-index:2; position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;">
            {% for message in messages %}
            <div class="alert alert-dismissible alert-success fade in" id="alert">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}
        {% include 'nav.html' %}
        <div class="container" style="margin-top: 30px">
            <div class="card border-secondary mb-3">
                <div class="card-header">
                    <h4>Scout Team</h4>
                </div>
                <div class="container">
                    <br>
                    <form id="form" action="http://localhost:5000/results/add" method="post">
                        <div class="form-group row">
                            <label for="teamNumber" class="col-sm-2 col-form-label">Team Number</label>
                            <div class="col-sm-10">
                                <input type="number" onkeyup="checkNumber()" class="form-control" name="number" id="teamNumber" placeholder="192">
                                <div style="display: none;" id="numberBlank" class="invalid-feedback">Number cannot be blank!</div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="drivetrain" class="col-sm-2 col-form-label">Drivetrain Type</label>
                            <div class="col-sm-10">
                                <select onchange="newDrivetrain()" class="form-control" name="drivetrain" id="drivetrain">
                                    <option>Swerve</option>
                                    <option>Tank</option>
                                    <option>Slide</option>
                                    <option>Mecanum</option>
                                    <option>Holonomic</option>
                                    <option>Other</option>
                                </select>
                                <input type="text" class="form-control" name="drivetrainOther" id="drivetrainOther" placeholder="Drivetrain type">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="speed" class="col-sm-2 col-form-label">Speed (ft/s)</label>
                            <div class="col-sm-10">
                                <input type="number" class="form-control" name="speed" id="speed" placeholder="0">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="hatch" class="col-sm-2 col-form-label">Hatch Height</label>
                            <div class="col-sm-10">
                                <input id="hatch" name="hatch" type="range" class="custom-range col-md-2" min="0" max="3" value="0" step="1"/>
                                <span id="hatchLabel"><span style="margin-left: 10px;" class="badge badge-dark" id="hatchVal">0/3</span></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="hatch" class="col-sm-2 col-form-label">Ball Height</label>
                            <div class="col-sm-10">
                                <input id="ball" name="ball" type="range" class="custom-range col-md-2" min="0" max="3" value="0" step="1"/>
                                <span id="ballLabel"><span style="margin-left: 10px;" class="badge badge-dark" id="ballVal">0/3</span></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="climb" class="col-sm-2 col-form-label">Climber Height</label>
                            <div class="col-sm-10">
                                <input id="climb" name="climb" type="range" class="custom-range col-md-2" min="0" max="3" value="0" step="1"/>
                                <span id="climbLabel"><span style="margin-left: 10px;" class="badge badge-dark" id="climbVal">0/3</span></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="driver" class="col-sm-2 col-form-label">Driver Skill</label>
                            <div class="col-sm-10">
                                <input id="driver" name="driver" type="range" class="custom-range col-md-2" min="0" max="10" value="0" step="1"/>
                                <span id="driverLabel"><span style="margin-left: 10px;" class="badge badge-dark" id="driverVal">0/10</span></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="auton" class="col-sm-2 col-form-label">Autonomous</label>
                            <div class="col-sm-10">
                                <input id="auton" name="auton" type="range" class="custom-range col-md-2" min="0" max="10" value="0" step="1"/>
                                <span id="autonLabel"><span style="margin-left: 10px;" class="badge badge-dark" id="autonVal">0/10</span></span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="Comments" class="col-sm-2 col-form-label">Comments</label>
                            <div class="col-sm-10">
                                <textarea class="form-control" id="comments" name="comments" rows="3"></textarea>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-10">
                                <a onclick="submitForm()" class="btn btn-secondary">Submit</a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        $("#hatch").on("change", function(slideEvt) {
        $("#hatchVal").text( $("#hatch").val() + "/3");
        });
        $("#ball").on("change", function(slideEvt) {
        $("#ballVal").text( $("#ball").val() + "/3");
        });
        $("#climb").on("change", function(slideEvt) {
        $("#climbVal").text( $("#climb").val() + "/3");
        });
        $("#driver").on("change", function(slideEvt) {
        $("#driverVal").text( $("#driver").val() + "/10");
        });
        $("#auton").on("change", function(slideEvt) {
        $("#autonVal").text( $("#auton").val() + "/10");
        });



        $("#drivetrainOther").hide()
        function newDrivetrain() {
            if ($("#drivetrain").val() == "Other") {
              $("#drivetrainOther").show()
            } else {
               $("#drivetrainOther").hide()
            }
        }



        function submitForm() {
            console.log(checkNumber())

            if (checkNumber() == true) {
                document.getElementById("form").submit()
            }
        }
        function checkNumber() {
            console.log("hi")
            if ($("#teamNumber").val() == "") {
                $('#numberBlank').show();
                $("#submit").attr("disabled", "disabled");
                $("#teamNumber").addClass("is-invalid");
                return false;
            } else {
                $('#numberBlank').hide();
                $("#submit").removeAttr("disabled");
                $("#teamNumber").removeClass("is-invalid");
                return true;
            }
        }

                $("#alert").fadeTo(5000, 500).slideUp(500, function(){
        $("#alert").slideUp(500);
        });


    </script>
</html>